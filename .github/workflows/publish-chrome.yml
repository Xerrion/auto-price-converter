name: Publish to Chrome Web Store

on:
  workflow_dispatch:
    inputs:
      confirm:
        description: 'Type "publish" to confirm submission for review'
        required: true
        default: ""

jobs:
  publish:
    runs-on: ubuntu-latest
    if: github.event.inputs.confirm == 'publish'

    steps:
      - name: Publish to Chrome Web Store
        uses: mobilefirstllc/cws-publish@latest
        with:
          action: publish
          client_id: ${{ secrets.CHROME_CLIENT_ID }}
          client_secret: ${{ secrets.CHROME_CLIENT_SECRET }}
          refresh_token: ${{ secrets.CHROME_REFRESH_TOKEN }}
          extension_id: ${{ secrets.CHROME_EXTENSION_ID }}

      - name: Confirmation
        run: echo "Extension submitted for Chrome Web Store review!"
